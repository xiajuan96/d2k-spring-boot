<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- 定义属性：关键业务模块DEBUG开关 -->
    <property name="d2k.debug.enabled" value="${D2K_DEBUG_ENABLED:-false}"/>
    <property name="d2k.producer.debug.enabled" value="${D2K_PRODUCER_DEBUG_ENABLED:-false}"/>
    <property name="d2k.consumer.debug.enabled" value="${D2K_CONSUMER_DEBUG_ENABLED:-false}"/>
    <property name="d2k.example.debug.enabled" value="${D2K_EXAMPLE_DEBUG_ENABLED:-false}"/>
    
    <!-- 控制台输出配置 -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{25} - %msg%n</pattern>
            <charset>UTF-8</charset>
        </encoder>

    </appender>
    

    <!-- 根日志配置 - 默认WARN级别，确保全局关闭DEBUG -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <!-- 取消注释启用文件日志 -->
        <!-- <appender-ref ref="FILE"/> -->
    </root>
    
    <!-- D2K核心组件日志配置 -->
    <logger name="com.d2k.spring.boot.autoconfigure" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
    </logger>
    
    <!-- D2K示例应用日志配置 -->
    <logger name="com.d2k.spring.boot.autoconfigure.example" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
    </logger>
    
    <!-- D2K生产者日志配置 -->
    <logger name="com.d2k.porducer" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
    </logger>
    
<!--    &lt;!&ndash; D2K消费者日志配置 - 彻底关闭DEBUG日志 &ndash;&gt;-->
<!--    <logger name="com.d2k.consumer" level="INFO" additivity="false"/>-->
<!--    <logger name="com.d2k.consumer.DelayConsumerRunnable" level="INFO" additivity="false"/>-->
<!--    <logger name="com.d2k.consumer.TopicPartitionProcessor" level="INFO" additivity="false"/>-->
    
    <!-- 关键业务逻辑DEBUG开关（需要调试时手动修改level为DEBUG） -->
    <!-- 示例应用DEBUG开关 -->
    <!-- <logger name="com.d2k.spring.boot.autoconfigure.example.D2kSpringExampleApplication" level="DEBUG" additivity="false">
        <appender-ref ref="DEBUG_CONSOLE"/>
        <appender-ref ref="CONSOLE"/>
    </logger> -->
    
    <!-- 生产者DEBUG开关 -->
    <!-- <logger name="com.d2k.porducer.DelayProducer" level="DEBUG" additivity="false">
        <appender-ref ref="DEBUG_CONSOLE"/>
        <appender-ref ref="CONSOLE"/>
    </logger> -->
    
    <!-- 消费者DEBUG开关 -->
    <!-- <logger name="com.d2k.consumer.DelayConsumerRunnable" level="DEBUG" additivity="false">
        <appender-ref ref="DEBUG_CONSOLE"/>
        <appender-ref ref="CONSOLE"/>
    </logger>
    <logger name="com.d2k.consumer.TopicPartitionProcessor" level="DEBUG" additivity="false">
        <appender-ref ref="DEBUG_CONSOLE"/>
        <appender-ref ref="CONSOLE"/>
    </logger> -->
    
<!--    &lt;!&ndash; 第三方组件严格控制 - 只显示ERROR级别 &ndash;&gt;-->
<!--    <logger name="org.apache.kafka" level="INFO" additivity="false">-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->
<!--    -->
<!--    <logger name="org.springframework" level="INFO" additivity="false">-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->
<!--    -->
<!--    <logger name="org.springframework.boot" level="INFO" additivity="false">-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->
<!--    -->
<!--    <logger name="org.springframework.context" level="INFO" additivity="false">-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->
<!--    -->
<!--    <logger name="org.springframework.beans" level="INFO" additivity="false">-->
<!--        <appender-ref ref="CONSOLE"/>-->
<!--    </logger>-->
<!--    -->
<!--    &lt;!&ndash; 测试环境专用配置 &ndash;&gt;-->
<!--    <springProfile name="test">-->
<!--        <root level="INFO">-->
<!--            <appender-ref ref="CONSOLE"/>-->
<!--        </root>-->
<!--        -->
<!--        <logger name="com.d2k.spring.boot.autoconfigure" level="WARN" additivity="false">-->
<!--            <appender-ref ref="CONSOLE"/>-->
<!--        </logger>-->
<!--    </springProfile>-->
    
</configuration>